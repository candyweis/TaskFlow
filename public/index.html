<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div id="authModal" class="modal show">
        <div class="modal-content">
            <div class="auth-container">
                <div class="auth-header">
                    <i class="fas fa-tasks"></i>
                    <h2>–í—Ö–æ–¥ –≤ TaskFlow</h2>
                </div>
                <form id="authForm">
                    <div class="form-group has-icon">
                        <input type="text" id="username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="form-group has-icon">
                        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <i class="fas fa-lock"></i>
                    </div>
                    <button type="submit" id="authButton" class="btn btn-primary">
                        <span id="authButtonText">–í–æ–π—Ç–∏</span>
                        <div id="authLoader" class="loader" style="display: none;"></div>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app" class="d-none">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="navbar">
            <div class="nav-brand">
                <i class="fas fa-tasks"></i>
                <h1>TaskFlow</h1>
            </div>
            <div class="nav-menu">
                <button class="nav-btn active" data-section="projects">
                    <i class="fas fa-project-diagram"></i>
                    <span>–ü—Ä–æ–µ–∫—Ç—ã</span>
                </button>
                <button class="nav-btn" data-section="board">
                    <i class="fas fa-columns"></i>
                    <span>–ö–∞–Ω–±–∞–Ω</span>
                </button>
                <button class="nav-btn" data-section="colleagues">
                    <i class="fas fa-users"></i>
                    <span>–ö–æ–ª–ª–µ–≥–∏</span>
                </button>
                <a href="/admin" class="nav-btn" id="adminLink" style="display: none;">
                    <i class="fas fa-cog"></i>
                    <span>–ê–¥–º–∏–Ω–∫–∞</span>
                </a>
            </div>
            <div class="nav-user">
                <span id="currentUser"></span>
                <span id="currentRole" class="role-badge"></span>
                <button id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>–í—ã—Ö–æ–¥</span>
                </button>
            </div>
        </nav>

        <!-- –°–µ–∫—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ -->
        <section id="projectsSection" class="content-section">
            <div class="section-header">
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</h2>
                <button id="addProjectBtn" class="btn btn-primary" style="display: none;">
                    <i class="fas fa-plus"></i>
                    –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
                </button>
            </div>
            <div id="projectsList" class="projects-grid">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –∫–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∏ -->
        <section id="boardSection" class="content-section" style="display: none;">
            <div class="section-header">
                <h2>–ö–∞–Ω–±–∞–Ω –¥–æ—Å–∫–∞</h2>
                <div class="board-controls">
                    <select id="projectFilter">
                        <option value="">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
                    </select>
                    <button id="addTaskBtn" class="btn btn-primary" style="display: none;">
                        <i class="fas fa-plus"></i>
                        –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞
                    </button>
                    <button id="viewArchivedBtn" class="btn btn-secondary">
                        <i class="fas fa-archive"></i>
                        –ê—Ä—Ö–∏–≤
                    </button>
                </div>
            </div>
            <div class="kanban-board">
                <div class="kanban-column" data-status="unassigned">
                    <div class="column-header">
                        <h3><i class="fas fa-inbox"></i> –ù–µ—Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="column-content" id="unassigned-tasks"></div>
                </div>
                <div class="kanban-column" data-status="in_progress">
                    <div class="column-header">
                        <h3><i class="fas fa-play"></i> –í —Ä–∞–±–æ—Ç–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="column-content" id="in_progress-tasks"></div>
                </div>
                <div class="kanban-column" data-status="developed">
                    <div class="column-header">
                        <h3><i class="fas fa-code"></i> –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="column-content" id="developed-tasks"></div>
                </div>
                <div class="kanban-column" data-status="review">
                    <div class="column-header">
                        <h3><i class="fas fa-search"></i> –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="column-content" id="review-tasks"></div>
                </div>
                <div class="kanban-column" data-status="deploy">
                    <div class="column-header">
                        <h3><i class="fas fa-upload"></i> –ù–∞ –∑–∞–ª–∏–≤–µ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="column-content" id="deploy-tasks"></div>
                </div>
                <div class="kanban-column" data-status="done">
                    <div class="column-header">
                        <h3><i class="fas fa-check"></i> –ì–æ—Ç–æ–≤–æ</h3>
                        <span class="task-count">0</span>
                    </div>
                    <div class="column-content" id="done-tasks"></div>
                </div>
            </div>
        </section>

        <!-- –°–µ–∫—Ü–∏—è –∫–æ–ª–ª–µ–≥ -->
        <section id="colleaguesSection" class="content-section" style="display: none;">
            <div class="section-header">
                <h2>–°–ø–∏—Å–æ–∫ –∫–æ–ª–ª–µ–≥</h2>
                <div class="colleagues-controls">
                    <input type="text" id="searchColleagues" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ —Ä–æ–ª–∏" class="search-input">
                    <select id="roleFilter">
                        <option value="">–í—Å–µ —Ä–æ–ª–∏</option>
                        <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</option>
                        <option value="manager">–ú–µ–Ω–µ–¥–∂–µ—Ä—ã</option>
                        <option value="worker">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</option>
                    </select>
                </div>
            </div>

            <div id="colleaguesList" class="colleagues-grid">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>

            <!-- –ü—Ä–æ–µ–∫—Ç—ã –æ–≤–µ—Ä–ª–∏—Ñ -->
            <div class="section-header mt-3">
                <h2>–ü—Ä–æ–µ–∫—Ç—ã Overkill</h2>
                <button id="addOverkillProjectBtn" class="btn btn-primary">
                    <i class="fas fa-plus"></i>
                    –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
                </button>
            </div>

            <div class="overkill-projects-table-container">
                <table class="overkill-projects-table">
                    <thead>
                        <tr>
                            <th>–ü—Ä–æ–µ–∫—Ç</th>
                            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                            <th>–°–æ–∑–¥–∞—Ç–µ–ª—å</th>
                            <th>–°—Å—ã–ª–∫–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="overkillProjectsTableBody">
                        <tr>
                            <td colspan="5" class="loading-cell">
                                <div class="spinner"></div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-project-diagram"></i> –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h3>
                <button class="close">&times;</button>
            </div>
            <form id="projectForm">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ *</label>
                    <input type="text" id="projectName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" required>
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="projectDescription" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('projectModal')">
                        <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="overkillProjectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-external-link-alt"></i> –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç Overkill</h3>
                <button class="close">&times;</button>
            </div>
            <form id="overkillProjectForm">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ *</label>
                    <input type="text" id="overkillProjectName" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" required>
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="overkillProjectDescription" rows="4" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç..."></textarea>
                </div>
                <div class="form-group">
                    <label>–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç *</label>
                    <input type="url" id="overkillProjectLink" placeholder="https://example.com/project" required>
                    <small style="color: #666; font-size: 12px;">–ö–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Ä–µ—Å—É—Ä—Å –ø—Ä–æ–µ–∫—Ç–∞</small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('overkillProjectModal')">
                        <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="taskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-tasks"></i> –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</h3>
                <button class="close">&times;</button>
            </div>
            <form id="taskForm">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *</label>
                    <input type="text" id="taskTitle" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required>
                </div>
                <div class="form-group">
                    <label>–¶–µ–ª—å –∑–∞–¥–∞—á–∏</label>
                    <input type="text" id="taskGoal" placeholder="–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è –Ω–∞ –≤—ã—Ö–æ–¥–µ?">
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="taskDescription" rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏..."></textarea>
                </div>
                <div class="form-group">
                    <label>–°–≤—è–∑–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç</label>
                    <select id="taskProject">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</option>
                    </select>
                    <small style="color: #666; font-size: 12px;">–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</small>
                </div>
                <div class="form-group">
                    <label>–ü—Ä–æ–µ–∫—Ç Overkill</label>
                    <select id="taskOverkillProject">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç Overkill (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</option>
                    </select>
                    <small style="color: #666; font-size: 12px;">–ü—Ä–æ–µ–∫—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏</small>
                </div>
                <div class="form-group">
                    <label>–ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É</label>
                    <input type="url" id="taskProjectLink" placeholder="https://example.com/task-resource">
                    <small style="color: #666; font-size: 12px;">–°—Å—ã–ª–∫–∞ –Ω–µ —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –≤—ã—à–µ</small>
                </div>
                <div class="form-group">
                    <label>–î–µ–¥–ª–∞–π–Ω *</label>
                    <input type="datetime-local" id="taskDeadline" required>
                </div>
                <div class="form-group">
                    <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                    <select id="taskPriority">
                        <option value="low">üü¢ –ù–∏–∑–∫–∏–π</option>
                        <option value="medium" selected>üü° –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">üî¥ –í—ã—Å–æ–∫–∏–π</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</label>
                    <div id="assigneesList">
                        <div class="loading">
                            <div class="spinner"></div>
                        </div>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('taskModal')">
                        <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∑–∞–¥–∞—á–∏ -->
    <div id="taskAssigneesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-users"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏</h3>
                <button class="close">&times;</button>
            </div>
            <div style="padding: 30px;">
                <div class="form-group">
                    <label>–ó–∞–¥–∞—á–∞</label>
                    <div id="taskAssigneesTitle" class="task-title-display"></div>
                </div>
                <div class="form-group">
                    <label>–¢–µ–∫—É—â–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏</label>
                    <div id="currentAssigneesList" class="current-assignees-list"></div>
                </div>
                <div class="form-group">
                    <label>–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</label>
                    <div id="availableAssigneesList" class="available-assignees-list"></div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('taskAssigneesModal')">
                        <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="button" class="btn btn-primary" id="saveTaskAssignees">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –∑–∞–¥–∞—á–µ -->
    <div id="taskCommentsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-comments"></i> –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
                <button class="close">&times;</button>
            </div>
            <div style="padding: 30px;">
                <div class="form-group">
                    <label>–ó–∞–¥–∞—á–∞</label>
                    <div id="taskCommentsTitle" class="task-title-display"></div>
                </div>
                <div class="form-group">
                    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</label>
                    <div id="taskCommentsList" class="task-comments-list"></div>
                </div>
                <div class="form-group">
                    <label>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                    <textarea id="newTaskComment" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('taskCommentsModal')">
                        <i class="fas fa-times"></i> –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                    <button type="button" class="btn btn-primary" id="addTaskComment">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞—Ä—Ö–∏–≤–∞ -->
    <div id="archiveModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-archive"></i> –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏</h3>
                <button class="close">&times;</button>
            </div>
            <div style="padding: 30px;">
                <div id="archivedTasksList" class="archived-tasks-list">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
